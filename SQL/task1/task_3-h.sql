select count(*) as qty_Dept from (select distinct "DeptID" from (select "DeptID", "Termd", "PerformanceScore", count(*) as How_many_workers from hrdataset_v14_csv where "PerformanceScore" not like 'PIP' and "PerformanceScore" not like 'Needs Improvement' and "Termd" <> 1 group by "DeptID", "Termd", "PerformanceScore" having count(*) > 5 order by count(*) desc) new_view) new_view2;